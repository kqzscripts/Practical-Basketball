local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "KqzlvoHub",
   LoadingTitle = "KqzlvoHub | Practical Basketball",
   LoadingSubtitle = "by Kqzlvo",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "KqzlvoHub",
      FileName = "PracticalBasketball"
   },
   Discord = {
      Enabled = false,
      Invite = "",
      RememberJoins = true
   },
   KeySystem = false
})

local MainTab = Window:CreateTab("Main", 4483362458)
local MovementTab = Window:CreateTab("Movement", 4483362458)

-- Variables
local AutoTimeEnabled = false
local AutoSprintEnabled = false
local InfiniteStaminaEnabled = false
local SpeedBoostEnabled = false
local SpeedBoostValue = 22
local DisableMovementLockEnabled = false
local AutoStealEnabled = false

-- Services
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local VirtualInputManager = game:GetService("VirtualInputManager")
local UserInputService = game:GetService("UserInputService")

-- Platform Detection
local isMobile = UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled
local isConsole = UserInputService.GamepadEnabled

-- Features Implementation

MainTab:CreateToggle({
   Name = "Auto Time (Universal)",
   CurrentValue = false,
   Flag = "AutoTime",
   Callback = function(Value)
      AutoTimeEnabled = Value
   end,
})

MovementTab:CreateToggle({
   Name = "Infinite Stamina",
   CurrentValue = false,
   Flag = "InfStamina",
   Callback = function(Value)
      InfiniteStaminaEnabled = Value
   end,
})

MovementTab:CreateToggle({
   Name = "Speed Boost",
   CurrentValue = false,
   Flag = "SpeedBoost",
   Callback = function(Value)
      SpeedBoostEnabled = Value
   end,
})

MovementTab:CreateSlider({
   Name = "Speed Value",
   Range = {16, 50},
   Increment = 1,
   Suffix = " Speed",
   CurrentValue = 22,
   Flag = "SpeedValue",
   Callback = function(Value)
      SpeedBoostValue = Value
   end,
})

MovementTab:CreateToggle({
   Name = "Disable Movement Lock",
   CurrentValue = false,
   Flag = "DisableMoveLock",
   Callback = function(Value)
      DisableMovementLockEnabled = Value
   end,
})

MainTab:CreateToggle({
   Name = "Auto Steal",
   CurrentValue = false,
   Flag = "AutoSteal",
   Callback = function(Value)
      AutoStealEnabled = Value
   end,
})

-- Cross-Platform Input Simulation
local function TriggerAction()
    if isMobile then
        -- Mobile touch simulation (usually fires on tap)
        VirtualInputManager:SendMouseButtonEvent(0, 0, 0, false, game, 0)
    elseif isConsole then
        -- Gamepad simulation (ButtonR2 or ButtonX)
        VirtualInputManager:SendGamepadEvent(Enum.UserInputType.Gamepad1, Enum.KeyCode.ButtonX, 1, 0, 0)
        task.wait(0.05)
        VirtualInputManager:SendGamepadEvent(Enum.UserInputType.Gamepad1, Enum.KeyCode.ButtonX, 0, 0, 0)
    else
        -- PC Mouse simulation
        VirtualInputManager:SendMouseButtonEvent(0, 0, 0, false, game, 0)
    end
end

-- Logic Loop
RunService.RenderStepped:Connect(function()
    local Character = LocalPlayer.Character
    if not Character then return end
    local Humanoid = Character:FindFirstChildOfClass("Humanoid")
    local RootPart = Character:FindFirstChild("HumanoidRootPart")
    if not Humanoid or not RootPart then return end

    -- Speed Boost
    if SpeedBoostEnabled then
        Humanoid.WalkSpeed = SpeedBoostValue
    end

    -- Infinite Stamina
    if InfiniteStaminaEnabled then
        local Stats = LocalPlayer:FindFirstChild("Stats") or Character:FindFirstChild("Stats")
        if Stats and Stats:FindFirstChild("Stamina") then
            Stats.Stamina.Value = 100
        end
    end

    -- Disable Movement Lock
    if DisableMovementLockEnabled then
        Humanoid:SetStateEnabled(Enum.HumanoidStateType.NoPhysics, false)
        if Character:FindFirstChild("Lock") then
            Character.Lock.Value = false
        end
    end

    -- Auto Steal
    if AutoStealEnabled then
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local dist = (RootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
                if dist < 7 then
                    TriggerAction()
                end
            end
        end
    end
    
    -- Auto Time (Cross-Platform)
    if AutoTimeEnabled then
        local PlayerGui = LocalPlayer:FindFirstChild("PlayerGui")
        if PlayerGui then
            local Meter = PlayerGui:FindFirstChild("Meter", true) or PlayerGui:FindFirstChild("ShotMeter", true) or PlayerGui:FindFirstChild("ShotGui", true)
            if Meter and Meter.Visible then
                local Bar = Meter:FindFirstChild("Bar", true) or Meter:FindFirstChild("Fill", true)
                local Indicator = Meter:FindFirstChild("Indicator", true) or Meter:FindFirstChild("Pointer", true)
                
                if Bar and Indicator then
                    local pos = Indicator.Position.X.Scale
                    if pos >= 0.85 then
                        TriggerAction()
                    end
                end
            end
        end
    end
end)

Rayfield:Notify({
   Title = "KqzlvoHub Universal",
   Content = "Compatible with PC, Mobile, and Controller!",
   Duration = 5,
   Image = 4483362458
})
