local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

-- Wait for player and PlayerGui to be ready
if not player then
    repeat task.wait() until Players.LocalPlayer
    player = Players.LocalPlayer
end
local playerGui = player:WaitForChild("PlayerGui")

-- Remove any existing GUI to avoid duplicates
local existing = playerGui:FindFirstChild("KqzExploitsUI")
if existing then
    existing:Destroy()
end

local L_1_ = Instance.new("ScreenGui")
local L_2_ = Instance.new("Frame")
local L_3_ = Instance.new("TextLabel")
local L_4_ = Instance.new("TextButton")
local L_5_ = Instance.new("TextButton")
local L_6_ = Instance.new("TextButton")
local L_7_ = Instance.new("UICorner")
local L_8_ = Instance.new("UICorner")
local L_9_ = Instance.new("UICorner")
local L_10_ = Instance.new("UICorner")
local L_11_ = Instance.new("UIGradient")

L_1_.Name = "KqzExploitsUI"
L_1_.Parent = playerGui
L_1_.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
L_1_.ResetOnSpawn = false

L_2_.Name = "MainFrame"
L_2_.Parent = L_1_
L_2_.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
L_2_.Position = UDim2.new(0.5, -100, 0.5, -95)
L_2_.Size = UDim2.new(0, 200, 0, 190)
L_2_.Active = true
L_2_.Draggable = true
L_2_.ClipsDescendants = false -- Ensure children aren't clipped

L_10_.CornerRadius = UDim.new(0, 10)
L_10_.Parent = L_2_

L_11_.Color = ColorSequence.new{ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 40, 40)), ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 20))}
L_11_.Rotation = 45
L_11_.Parent = L_2_

L_3_.Name = "Title"
L_3_.Parent = L_2_
L_3_.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
L_3_.BackgroundTransparency = 1.000
L_3_.Size = UDim2.new(1, 0, 0, 40)
L_3_.Font = Enum.Font.GothamBold
L_3_.Text = "KqzExploits"
L_3_.TextColor3 = Color3.fromRGB(255, 255, 255)
L_3_.TextSize = 18.000

-- Save Position Button
L_4_.Name = "SavePos"
L_4_.Parent = L_2_
L_4_.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
L_4_.Position = UDim2.new(0.1, 0, 0.25, 0)
L_4_.Size = UDim2.new(0.8, 0, 0, 35)
L_4_.Font = Enum.Font.GothamSemibold
L_4_.Text = "Save Position"
L_4_.TextColor3 = Color3.fromRGB(200, 200, 200)
L_4_.TextSize = 14.000
L_4_.AutoButtonColor = true
L_4_.ZIndex = 5

L_7_.CornerRadius = UDim.new(0, 6)
L_7_.Parent = L_4_

-- Teleport & Steal Button
L_5_.Name = "Teleport"
L_5_.Parent = L_2_
L_5_.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
L_5_.Position = UDim2.new(0.1, 0, 0.48, 0)
L_5_.Size = UDim2.new(0.8, 0, 0, 35)
L_5_.Font = Enum.Font.GothamSemibold
L_5_.Text = "Teleport & Steal"
L_5_.TextColor3 = Color3.fromRGB(200, 200, 200)
L_5_.TextSize = 14.000
L_5_.AutoButtonColor = true
L_5_.ZIndex = 5

L_8_.CornerRadius = UDim.new(0, 6)
L_8_.Parent = L_5_

-- Auto Kick Button
L_6_.Name = "AutoKick"
L_6_.Parent = L_2_
L_6_.BackgroundColor3 = Color3.fromRGB(60, 20, 20)
L_6_.Position = UDim2.new(0.1, 0, 0.71, 0)
L_6_.Size = UDim2.new(0.8, 0, 0, 35)
L_6_.Font = Enum.Font.GothamSemibold
L_6_.Text = "Auto Kick"
L_6_.TextColor3 = Color3.fromRGB(255, 100, 100)
L_6_.TextSize = 14.000
L_6_.AutoButtonColor = true
L_6_.ZIndex = 5

L_9_.CornerRadius = UDim.new(0, 6)
L_9_.Parent = L_6_

local savedPos = nil
local isTeleporting = false

L_4_.MouseButton1Click:Connect(function()
    local char = player.Character or player.CharacterAdded:Wait()
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    if hrp then
        savedPos = hrp.CFrame
        L_4_.Text = "Position Saved!"
        task.wait(1)
        L_4_.Text = "Save Position"
    end
end)

local function stealBrainrot()
    for _, obj in pairs(game:GetDescendants()) do
        if obj:IsA("ProximityPrompt") then
            if string.find(string.lower(obj.ObjectText), "steal") or string.find(string.lower(obj.ActionText), "steal") or string.find(string.lower(obj.Parent.Name), "brainrot") then
                fireproximityprompt(obj)
            end
        end
    end
end

L_5_.MouseButton1Click:Connect(function()
    if isTeleporting then return end
    local char = player.Character
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    
    if hrp and savedPos then
        isTeleporting = true
        L_5_.Text = "Bypassing..."
        
        local connection
        local startTime = tick()
        
        connection = RunService.Heartbeat:Connect(function()
            if tick() - startTime >= 3 or not hrp or not hrp.Parent then
                connection:Disconnect()
                isTeleporting = false
                L_5_.Text = "Finished!"
                task.wait(1)
                L_5_.Text = "Teleport & Steal"
                return
            end
            
            hrp.CFrame = savedPos
            hrp.Velocity = Vector3.new(0, 0, 0)
            hrp.RotVelocity = Vector3.new(0, 0, 0)
            
            stealBrainrot()
        end)
    else
        L_5_.Text = savedPos and "No Character" or "No Position Saved"
        task.wait(1)
        L_5_.Text = "Teleport & Steal"
    end
end)

L_6_.MouseButton1Click:Connect(function()
    player:Kick("KqzExploits: Manual Auto-Kick Triggered")
end)

print("KqzExploits v3.1 Fixed Loaded Successfully")
